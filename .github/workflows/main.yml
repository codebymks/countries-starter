naem: build and deploy JAR app to Azure Web App - countries

on:
push:
branches: 
- main
workflow_dispatch:

jobs:
build:
runs-on: ubuntu-latezt
permissions:
contents: read

steps: 
- uses: actions/checkout@v5

- name: Set up Java version
uses: actions/setup-java@v4
with:
java-version: '21'
distribution: 'microsoft'

- name: Build with Maven
env:
PROD_DATABASE_URL: ${{secrets.PROD_DATABASE_URL}}
PROD_USERNAME: ${{secrets.PROD_USERNAME}}
PROD_PASSWORD: ${{secrets.PROD_PASSWORD}}

run: mvn clean install

- name: Upload artifact for deployment job
uses: actions/upload-artifact@v4
with:
name: java-app
path: '${{github.workspace}}/target/*.jar'
